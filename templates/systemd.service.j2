[Unit]
Description=Java backend service
After=network.target

[Service]
Type=simple
User={{ deployment_user }}
Group={{ deployment_group }}
EnvironmentFile={{ deployment_workdir }}/.env
WorkingDirectory={{ deployment_workdir }}
ExecStart=/usr/bin/java -javaagent:/home/newrelic/newrelic.jar \
                        -Dspring.profiles.active={{ deployment_spring_profile }} \
                        -jar {{ deployment_workdir }}/app.jar \
                        --server.port={{ deployment_server_port }}
Restart=on-failure
RestartSec=5
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
